import{a as j,b as B,c as z,f as R,l as F}from"./chunk-D4WMZNJR.js";import{a as U}from"./chunk-RV4HWPOC.js";import{l as D,m as I,o as W}from"./chunk-V5LGPLRQ.js";import{a as O}from"./chunk-O5QE2TLP.js";import{$ as p,$a as V,Fa as L,La as _,O as P,Sa as u,T as k,Ua as S,Ya as i,Za as n,_ as m,_a as f,aa as v,ba as E,c as g,cb as x,db as c,ib as a,jb as w,lb as A,mb as h,nb as b,ob as y,va as d,wa as T}from"./chunk-DBOOX4Q2.js";var M=class s{constructor(r){this.apiclientService=r}getAseguradoras(r,e,o){return g(this,null,function*(){let t=new URLSearchParams({page:r.toString(),pageSize:e.toString()});return o&&t.append("search",o),this.apiclientService.get(`aseguradoras?${t.toString()}`)})}downloadReport(){return g(this,null,function*(){try{let r=yield this.apiclientService.get("aseguradoras/report",{responseType:"blob"}),e=window.URL.createObjectURL(r),o=document.createElement("a");o.href=e,o.download="reporte_Aseguradoras.pdf",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(e)}catch(r){console.error("Error al descargar el reporte:",r)}})}downloadExcel(r){return g(this,null,function*(){try{let e=new URLSearchParams;r.columns&&e.append("columns",r.columns),r.filters&&e.append("filters",r.filters);let o=`aseguradoras/excel?${e.toString()}`,t=yield this.apiclientService.get(o,{responseType:"blob"}),l=window.URL.createObjectURL(t),C=document.createElement("a");C.href=l,C.download="reporte_Aseguradoras.xlsx",document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(l)}catch(e){console.error("Error al descargar el excel",e)}})}static \u0275fac=function(e){return new(e||s)(k(U))};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})};function K(s,r){s&1&&(f(0,"div",15),i(1,"div",16)(2,"div",17)(3,"h2",18),a(4,"Descarga en curso"),n(),i(5,"p"),a(6,"Por favor, espere mientras se genera el reporte..."),n(),i(7,"div",19),v(),i(8,"svg",20),f(9,"circle",21)(10,"path",22),n()()()())}function Q(s,r){if(s&1&&(i(0,"tr")(1,"td",28),a(2),n(),i(3,"td",28),a(4),n(),i(5,"td",28),a(6),n(),i(7,"td",28),a(8),n(),i(9,"td",28),a(10),n()()),s&2){let e=r.$implicit;d(2),w(e.seg_id||"-------"),d(2),w(e.seg_nombre||"-------"),d(2),w(e.seg_direccion||"-------"),d(2),w(e.seg_tel||"-------"),d(2),w(e.seg_loc||"-------")}}function q(s,r){if(s&1&&(i(0,"table",9)(1,"thead",23)(2,"tr")(3,"th",24),a(4,"ID"),n(),i(5,"th",25),a(6,"Nombre"),n(),i(7,"th",25),a(8,"Direcci\xF3n"),n(),i(9,"th",26),a(10,"Tel\xE9fono"),n(),i(11,"th",25),a(12,"Ubicaci\xF3n"),n()()(),i(13,"tbody"),_(14,Q,11,5,"tr",27),n()()),s&2){let e=c();d(14),u("ngForOf",e.data)}}function J(s,r){s&1&&(i(0,"div",10),a(1," Sin registros "),n())}function X(s,r){if(s&1&&_(0,J,2,0,"div",29),s&2){let e=c();u("ngIf",e.data.length===0)}}function Y(s,r){if(s&1){let e=V();i(0,"div",14),f(1,"div",30),i(2,"div",31)(3,"div",32)(4,"div",33)(5,"div",34)(6,"div",35)(7,"div",36),v(),i(8,"svg",37),f(9,"path",38),n()(),E(),i(10,"div",39)(11,"h3",40),a(12," \xBFQu\xE9 datos buscas exportar? "),n()()(),i(13,"div",41)(14,"div",42)(15,"input",43),y("ngModelChange",function(t){m(e);let l=c();return b(l.exportAll,t)||(l.exportAll=t),p(t)}),x("change",function(){m(e);let t=c();return p(t.onExportAllChange())}),n(),i(16,"label",44),a(17,"Todo el contenido"),n()(),i(18,"div",45)(19,"input",46),y("ngModelChange",function(t){m(e);let l=c();return b(l.exportColumns.nombre,t)||(l.exportColumns.nombre=t),p(t)}),n(),i(20,"label",47),a(21,"Nombre"),n()(),i(22,"div",45)(23,"input",48),y("ngModelChange",function(t){m(e);let l=c();return b(l.exportColumns.direccion,t)||(l.exportColumns.direccion=t),p(t)}),n(),i(24,"label",49),a(25,"Direcci\xF3n"),n()(),i(26,"div",45)(27,"input",50),y("ngModelChange",function(t){m(e);let l=c();return b(l.exportColumns.telefono,t)||(l.exportColumns.telefono=t),p(t)}),n(),i(28,"label",51),a(29,"Tel\xE9fono"),n()(),i(30,"div",45)(31,"input",52),y("ngModelChange",function(t){m(e);let l=c();return b(l.exportColumns.localidad,t)||(l.exportColumns.localidad=t),p(t)}),n(),i(32,"label",53),a(33,"Localidad"),n()(),i(34,"div",41)(35,"label",54),a(36," Buscar datos espec\xEDficos "),n(),i(37,"input",55),y("ngModelChange",function(t){m(e);let l=c();return b(l.searchEspecificData,t)||(l.searchEspecificData=t),p(t)}),n()()()(),i(38,"div",56)(39,"button",57),x("click",function(){m(e);let t=c();return p(t.downloadExcel())}),a(40," Exportar "),n(),i(41,"button",58),x("click",function(){m(e);let t=c();return p(t.excelOptions=!1)}),a(42," Cancelar "),n()()()()()()}if(s&2){let e=c();d(15),h("ngModel",e.exportAll),d(4),h("ngModel",e.exportColumns.nombre),u("disabled",e.exportAll),d(4),h("ngModel",e.exportColumns.direccion),u("disabled",e.exportAll),d(4),h("ngModel",e.exportColumns.telefono),u("disabled",e.exportAll),d(4),h("ngModel",e.exportColumns.localidad),u("disabled",e.exportAll),d(6),h("ngModel",e.searchEspecificData)}}var N=class s{constructor(r){this.aseguradorasService=r;this.initializeData()}data=[];currentPage=1;totalPages=0;totalItems=0;pageSize=0;searchText="";isLoading=!1;excelOptions=!1;searchTimeout;exportAll=!1;exportColumns={nombre:!1,direccion:!1,telefono:!1,localidad:!1};searchEspecificData="";initializeData(){return g(this,null,function*(){let r=yield this.aseguradorasService.getAseguradoras(this.currentPage,this.pageSize,this.searchText);this.currentPage=r.pagination.page,this.pageSize=r.pagination.pageSize,this.data=r.data,this.totalItems=r.pagination.totalRecords,this.totalPages=Math.ceil(this.totalItems/this.pageSize)})}onSearchInputChange(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.currentPage=1,this.initializeData()},500)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadPage())}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadPage())}loadPage(){return g(this,null,function*(){yield this.initializeData()})}downloadPdf(){return g(this,null,function*(){this.isLoading=!0;try{yield this.aseguradorasService.downloadReport()}catch(r){console.error("Error al descargar el reporte:",r)}finally{this.isLoading=!1}})}onExportAllChange(){this.exportAll&&(this.exportColumns={nombre:!1,direccion:!1,telefono:!1,localidad:!1})}downloadExcel(){return g(this,null,function*(){this.isLoading=!0;let r=[];this.exportAll||(this.exportColumns.nombre&&r.push("seg_nombre"),this.exportColumns.direccion&&r.push("seg_direccion"),this.exportColumns.telefono&&r.push("seg_tel"),this.exportColumns.localidad&&r.push("seg_loc"));let e=r.length>0?r.join(","):void 0,o;if(this.searchEspecificData&&this.searchEspecificData.trim()!=="")if(e)o=this.searchEspecificData.trim();else{let t=this.searchEspecificData.trim();o=`seg_nombre LIKE '%${t}%' OR seg_direccion LIKE '%${t}%' OR seg_tel LIKE '%${t}%' OR seg_loc LIKE '%${t}%'`}try{yield this.aseguradorasService.downloadExcel({columns:e,filters:o}),this.excelOptions=!1,this.isLoading=!1,this.searchEspecificData=""}catch(t){console.error("Error al descargar el Excel",t)}})}static \u0275fac=function(e){return new(e||s)(T(M))};static \u0275cmp=L({type:s,selectors:[["app-example"]],decls:28,vars:8,consts:[["title","Aseguradoras"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"bg-white","dark:bg-gray-900","p-5","flex","justify-between"],["type","text","placeholder","Buscar...",1,"w-100","border-2","border-gray-300","p-2","rounded-lg",3,"ngModelChange","input","ngModel"],[1,"w-100","flex","justify-between"],[1,"cursor-pointer","bg-gray-300","hover:bg-gray-400","text-gray-800","font-bold","py-2","px-4","rounded","inline-flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","w-4","h-4","mr-2"],["d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"],[1,"max-h-[600px]"],[1,"table-fixed","w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-center","py-4","text-gray-500"],[1,"flex","justify-between","p-5"],[1,"bg-gray-300","hover:bg-gray-400","text-gray-800","font-bold","py-2","px-4","rounded-l",3,"click","disabled"],[1,"bg-gray-300","hover:bg-gray-400","text-gray-800","font-bold","py-2","px-4","rounded-r",3,"click","disabled"],["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"relative","z-10"],[1,"fixed","inset-0","bg-black","opacity-50","z-40"],[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","flex","flex-col","items-center"],[1,"text-xl","font-bold","mb-4"],[1,"flex","items-center","justify-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","text-[#B94645]"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",1,"opacity-75"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3","w-1/12"],["scope","col",1,"px-6","py-3","w-3/12"],["scope","col",1,"px-6","py-3","w-2/12"],[4,"ngFor","ngForOf"],[1,"px-3","py-1"],["class","text-center py-4 text-gray-500",4,"ngIf"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500/75","transition-opacity"],[1,"fixed","inset-0","z-10","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"flex","items-center","p-2"],[1,"flex","h-12","w-12","items-center","justify-center","rounded-full","bg-green-100","sm:h-10","sm:w-10"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","d","M7 7h10M7 11h10m-3 4h3M12 3v4m0 0H8a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-6"],[1,"ml-2"],["id","modal-title",1,"text-base","font-semibold","text-gray-900"],[1,"mt-4"],[1,"flex","items-center","mb-4"],["id","todo","type","checkbox","name","exportOptions",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","cursor-pointer",3,"ngModelChange","change","ngModel"],["for","todo",1,"ml-2","text-sm","font-medium","text-gray-900"],[1,"flex","items-center","mb-2"],["id","nombre","type","checkbox","name","exportOptions",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","cursor-pointer",3,"ngModelChange","ngModel","disabled"],["for","nombre",1,"ml-2","text-sm","font-medium","text-gray-900"],["id","direccion","type","checkbox","name","exportOptions",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","cursor-pointer",3,"ngModelChange","ngModel","disabled"],["for","direccion",1,"ml-2","text-sm","font-medium","text-gray-900"],["id","telefono","type","checkbox","name","exportOptions",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","cursor-pointer",3,"ngModelChange","ngModel","disabled"],["for","telefono",1,"ml-2","text-sm","font-medium","text-gray-900"],["id","localidad","type","checkbox","name","exportOptions",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","cursor-pointer",3,"ngModelChange","ngModel","disabled"],["for","localidad",1,"ml-2","text-sm","font-medium","text-gray-900"],["for","searchFilter",1,"block","text-sm","font-medium","text-gray-900"],["id","searchFilter","type","text","placeholder","Solo dato espec\xEDfico",1,"mt-1","block","w-full","border-gray-300","rounded-md","shadow-sm","focus:border-blue-500","focus:ring-blue-500","cursor-pointer",3,"ngModelChange","ngModel"],[1,"bg-gray-50","px-4","py-3","sm:flex","sm:flex-row-reverse","sm:px-6"],["type","button",1,"cursor-pointer","inline-flex","w-full","justify-center","rounded-md","bg-red-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-xs","hover:bg-red-500","sm:ml-3","sm:w-auto",3,"click"],["type","button",1,"cursor-pointer","mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","ring-1","shadow-xs","ring-gray-300","ring-inset","hover:bg-gray-50","sm:mt-0","sm:w-auto",3,"click"]],template:function(e,o){e&1&&(_(0,K,11,0),f(1,"app-title",0),i(2,"div",1)(3,"div",2)(4,"div")(5,"input",3),y("ngModelChange",function(l){return b(o.searchText,l)||(o.searchText=l),l}),x("input",function(){return o.onSearchInputChange()}),n()(),i(6,"div",4)(7,"button",5),x("click",function(){return o.downloadPdf()}),v(),i(8,"svg",6),f(9,"path",7),n(),E(),i(10,"span"),a(11,"Descargar Pdf"),n()(),i(12,"button",5),x("click",function(){return o.excelOptions=!0}),v(),i(13,"svg",6),f(14,"path",7),n(),E(),i(15,"span"),a(16,"Descargar Excel"),n()()()(),i(17,"div",8),_(18,q,15,1,"table",9)(19,X,1,1,"div",10),n()(),i(20,"div",11)(21,"button",12),x("click",function(){return o.previousPage()}),a(22," Anterior "),n(),i(23,"span"),a(24),n(),i(25,"button",13),x("click",function(){return o.nextPage()}),a(26," Siguiente "),n()(),_(27,Y,43,10,"div",14)),e&2&&(S(o.isLoading?0:-1),d(5),h("ngModel",o.searchText),d(13),S(o.data.length>0?18:19),d(3),u("disabled",o.currentPage<=1),d(3),A("P\xE1gina ",o.currentPage," de ",o.totalPages,""),d(),u("disabled",o.currentPage>=o.totalPages),d(2),S(o.excelOptions?27:-1))},dependencies:[O,W,D,I,F,B,j,z,R],encapsulation:2})};export{N as ExampleComponent};
