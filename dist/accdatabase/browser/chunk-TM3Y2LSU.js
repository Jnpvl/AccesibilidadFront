import{a as H}from"./chunk-WMM35GRI.js";import{b as R,d as B,i as G}from"./chunk-FPZDSFJQ.js";import"./chunk-RV4HWPOC.js";import{k as N,l as V,m as k,n as F,o as L}from"./chunk-V5LGPLRQ.js";import{a as j}from"./chunk-O5QE2TLP.js";import{$ as u,$a as _,Fa as C,La as f,Sa as p,Ua as D,Ya as e,Za as t,_ as E,_a as s,a as P,aa as v,b as w,ba as h,c as S,cb as g,db as c,ib as i,jb as o,kb as x,lb as T,qb as M,rb as b,sb as y,va as a,wa as I}from"./chunk-DBOOX4Q2.js";var U=(d,r)=>({"text-green-500":d,"text-red-500":r});function A(d,r){d&1&&(s(0,"div",13),e(1,"div",14)(2,"div",15)(3,"h2",16),i(4,"Descarga en curso"),t(),e(5,"p"),i(6,"Por favor, espere mientras se genera el reporte..."),t(),e(7,"div",17),v(),e(8,"svg",18),s(9,"circle",19)(10,"path",20),t()()()())}function $(d,r){if(d&1){let n=_();e(0,"button",2),g("click",function(){E(n);let m=c();return u(m.pdfGlobal())}),v(),e(1,"svg",21),s(2,"path",22),t(),h(),e(3,"span"),i(4,"Descargar PDF Global"),t()()}}function X(d,r){if(d&1){let n=_();e(0,"button",2),g("click",function(){E(n);let m=c();return u(m.excelGlobal())}),v(),e(1,"svg",21),s(2,"path",22),t(),h(),e(3,"span"),i(4,"Descargar EXCEL Global"),t()()}}function q(d,r){if(d&1){let n=_();e(0,"button",2),g("click",function(){E(n);let m=c().$implicit,z=c();return u(z.pdfIndividual(m.PermisoId))}),v(),e(1,"svg",21),s(2,"path",22),t(),h(),e(3,"span"),i(4,"Descargar PDF"),t()()}}function J(d,r){if(d&1&&(e(0,"div",30)(1,"div",31)(2,"div")(3,"p",10),i(4,"Permisionario ID:"),t(),e(5,"p",11),i(6),t()(),e(7,"div")(8,"p",10),i(9,"Permiso ID:"),t(),e(10,"p",11),i(11),t()(),e(12,"div")(13,"p",10),i(14,"Tipo de Permiso:"),t(),e(15,"p",11),i(16),t()(),e(17,"div")(18,"p",10),i(19,"No. Expediente:"),t(),e(20,"p",11),i(21),t()(),e(22,"div")(23,"p",10),i(24,"Modalidad:"),t(),e(25,"p",11),i(26),t()(),e(27,"div")(28,"p",10),i(29,"Sistema:"),t(),e(30,"p",11),i(31),t()(),e(32,"div")(33,"p",10),i(34,"No. Folio:"),t(),e(35,"p",11),i(36),t()(),e(37,"div")(38,"p",10),i(39,"No. Oficio:"),t(),e(40,"p",11),i(41),t()(),e(42,"div")(43,"p",10),i(44,"Fecha Inicio:"),t(),e(45,"p",11),i(46),b(47,"date"),t()(),e(48,"div")(49,"p",10),i(50,"No. D\xEDas:"),t(),e(51,"p",11),i(52),t()(),e(53,"div")(54,"p",10),i(55,"Fecha T\xE9rmino:"),t(),e(56,"p",11),i(57),b(58,"date"),t()(),e(59,"div")(60,"p",10),i(61,"Municipio:"),t(),e(62,"p",11),i(63),t()(),e(64,"div",32)(65,"p",10),i(66,"T\xE9rminos:"),t(),e(67,"p",11),i(68),t()(),e(69,"div")(70,"p",10),i(71,"Marca:"),t(),e(72,"p",11),i(73),t()(),e(74,"div")(75,"p",10),i(76,"Modelo:"),t(),e(77,"p",11),i(78),t()(),e(79,"div")(80,"p",10),i(81,"No. Serie:"),t(),e(82,"p",11),i(83),t()(),e(84,"div")(85,"p",10),i(86,"No. Motor:"),t(),e(87,"p",11),i(88),t()(),e(89,"div")(90,"p",10),i(91,"Capacidad:"),t(),e(92,"p",11),i(93),t()(),e(94,"div")(95,"p",10),i(96,"Tipo de Unidad:"),t(),e(97,"p",11),i(98),t()(),e(99,"div")(100,"p",10),i(101,"Holograma:"),t(),e(102,"p",11),i(103),t()(),e(104,"div")(105,"p",10),i(106,"Director:"),t(),e(107,"p",11),i(108),t()(),e(109,"div")(110,"p",10),i(111,"Pie:"),t(),e(112,"p",11),i(113),t()(),e(114,"div")(115,"p",10),i(116,"No. De Placa:"),t(),e(117,"p",11),i(118),t()()(),e(119,"div",33)(120,"p")(121,"strong"),i(122,"Insertado el:"),t(),i(123),b(124,"date"),t(),e(125,"p")(126,"strong"),i(127,"Insertado por:"),t(),i(128),t(),e(129,"p")(130,"strong"),i(131,"\xDAltima actualizaci\xF3n:"),t(),i(132),b(133,"date"),t()()()),d&2){let n=c().$implicit;a(6),o(n.PermisionarioId),a(5),o(n.PermisoId),a(5),o(n.TipoDePermiso),a(5),o(n.NoExpediente),a(5),o(n.Modalidad),a(5),o(n.Sistema),a(5),o(n.NoFolio),a(5),o(n.NoOficio),a(5),o(y(47,26,n.FechaInicio,"dd/MM/yyyy")),a(6),o(n.NoDias),a(5),o(y(58,29,n.FechaTermino,"dd/MM/yyyy")),a(6),o(n.Municipio),a(5),o(n.Terminos),a(5),o(n.Marca),a(5),o(n.Modelo),a(5),o(n.NoSerie),a(5),o(n.NoMotor),a(5),o(n.Capacidad),a(5),o(n.TipoDeUnidad),a(5),o(n.Holograma),a(5),o(n.Director),a(5),o(n.Pie),a(5),o(n.NoDePlaca||"sin especificar"),a(5),x(" ",y(124,32,n.InsertDate,"dd/MM/yyyy")," "),a(5),x(" ",n.InsertBy," "),a(4),x(" ",y(133,35,n.UpdateDate,"dd/MM/yyyy")," ")}}function K(d,r){if(d&1){let n=_();e(0,"div",7)(1,"div",23)(2,"div")(3,"h3",24),i(4),t(),e(5,"p",25),i(6," Vigencia: "),e(7,"span",26),i(8),t()()(),e(9,"div",27),f(10,q,5,0,"button",5),e(11,"button",28),g("click",function(){let m=E(n).$implicit;return u(m.expanded=!m.expanded)}),e(12,"span"),i(13),t()()()(),f(14,J,134,38,"div",29),t()}if(d&2){let n=r.$implicit,l=c();a(4),T(" ",n.Marca," - ",n.Modelo," "),a(3),p("ngClass",M(7,U,l.isVigente(n.FechaTermino),!l.isVigente(n.FechaTermino))),a(),x(" ",l.isVigente(n.FechaTermino)?"Vigente":"No vigente"," "),a(2),p("ngIf",l.canExportPdf),a(3),x("",n.expanded?"Ocultar":"Mostrar"," detalles"),a(),p("ngIf",n.expanded)}}var O=class d{constructor(r,n,l,m){this.route=r;this.router=n;this.permisosService=l;this.localStorageService=m}permisionarioId;permisionario="";curp="";colonia="";Cp="";direccion="";rfc="";telefono="";tipoPermisionario="";datos=[];isLoading=!1;canExportPdf=!1;canExportExcel=!1;ngOnInit(){let r=this.route.snapshot.paramMap.get("PermisionarioId");r&&(this.permisionarioId=+r);let n=this.localStorageService.getUser();n&&(this.canExportPdf=n.canExportPdf,this.canExportExcel=n.canExportExcel),this.initializeData()}initializeData(){return S(this,null,function*(){try{let r=yield this.permisosService.getPermisionario(this.permisionarioId);r&&r.permisos&&(this.datos=r.permisos.map(n=>w(P({},n),{expanded:!1})),this.permisionario=r.permisos[0].Permisionario),r&&r.permisionario&&(this.curp=r.permisionario.CURP||"No definida",this.colonia=r.permisionario.Colonia||"No definida",this.Cp=r.permisionario.CodigoPostal||"No definida",this.direccion=r.permisionario.Direccion||"No definida",this.rfc=r.permisionario.RFC||"No definida",this.telefono=r.permisionario.Telefono1||"No definida",this.tipoPermisionario=r.permisionario.TipoPermisionario||"No definida")}catch(r){console.error("Error al obtener el permisionario:",r)}})}isVigente(r){return new Date(r)>=new Date}pdfGlobal(){return S(this,null,function*(){this.isLoading=!0;try{yield this.permisosService.downloadReports(this.permisionarioId)}catch(r){console.error("Error al descargar el reporte:",r)}finally{this.isLoading=!1}})}excelGlobal(){return S(this,null,function*(){this.isLoading=!0;try{yield this.permisosService.downloadPermisionarioExcel(this.permisionarioId)}catch(r){console.error("Error al descargar el Excel",r)}finally{this.isLoading=!1}})}pdfIndividual(r){return S(this,null,function*(){this.isLoading=!0;try{yield this.permisosService.downloadIndividualReport(r)}catch(n){console.error("Error al descargar el reporte:",n)}finally{this.isLoading=!1}})}goBack(){this.router.navigate(["/dashboard/permisos"])}static \u0275fac=function(n){return new(n||d)(I(R),I(B),I(H),I(G))};static \u0275cmp=C({type:d,selectors:[["app-permisos-detail"]],decls:51,vars:12,consts:[["title","Detalles del Permisionario"],[1,"mx-auto","my-6","flex","justify-between","w-[100%]"],[1,"flex","items-center","bg-green-500","hover:bg-green-600","text-white","font-bold","py-2","px-4","rounded",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","d","M15 19l-7-7 7-7"],["class","flex items-center bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded",3,"click",4,"ngIf"],[1,"mx-auto","space-y-6"],[1,"p-6","bg-white","shadow","rounded-lg"],[1,"text-2xl","font-bold","text-gray-800"],[1,"mt-4","grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"text-gray-600","font-semibold"],[1,"text-gray-800"],["class","p-6 bg-white shadow rounded-lg",4,"ngFor","ngForOf"],[1,"fixed","inset-0","bg-black","opacity-50","z-40"],[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","flex","flex-col","items-center"],[1,"text-xl","font-bold","mb-4"],[1,"flex","items-center","justify-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","text-[#B94645]"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",1,"opacity-75"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","w-4","h-4","mr-2"],["d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"],[1,"flex","justify-between","items-center","border-b","pb-4","mb-4"],[1,"text-xl","font-bold"],[1,"text-gray-600"],[3,"ngClass"],[1,"flex","space-x-2"],[1,"flex","items-center","bg-blue-500","hover:bg-blue-600","text-white","font-bold","py-2","px-4","rounded",3,"click"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"md:col-span-2"],[1,"mt-4","border-t","pt-4","text-sm","text-gray-500"]],template:function(n,l){n&1&&(f(0,A,11,0),s(1,"app-title",0),e(2,"div",1)(3,"button",2),g("click",function(){return l.goBack()}),v(),e(4,"svg",3),s(5,"path",4),t(),h(),e(6,"span"),i(7,"Regresar al listado"),t()(),f(8,$,5,0,"button",5)(9,X,5,0,"button",5),t(),e(10,"div",6)(11,"div",7)(12,"h2",8),i(13),t(),e(14,"div",9)(15,"div")(16,"p",10),i(17,"CURP:"),t(),e(18,"p",11),i(19),t()(),e(20,"div")(21,"p",10),i(22,"Colonia:"),t(),e(23,"p",11),i(24),t()(),e(25,"div")(26,"p",10),i(27,"C.P.:"),t(),e(28,"p",11),i(29),t()(),e(30,"div")(31,"p",10),i(32,"Direcci\xF3n:"),t(),e(33,"p",11),i(34),t()(),e(35,"div")(36,"p",10),i(37,"RFC:"),t(),e(38,"p",11),i(39),t()(),e(40,"div")(41,"p",10),i(42,"Tel\xE9fono:"),t(),e(43,"p",11),i(44),t()(),e(45,"div")(46,"p",10),i(47,"Tipo de Permisionario:"),t(),e(48,"p",11),i(49),t()()()(),f(50,K,15,10,"div",12),t()),n&2&&(D(l.isLoading?0:-1),a(8),p("ngIf",l.canExportPdf),a(),p("ngIf",l.canExportExcel),a(4),x(" ",l.permisionario," "),a(6),o(l.curp),a(5),o(l.colonia),a(5),o(l.Cp),a(5),o(l.direccion),a(5),o(l.rfc),a(5),o(l.telefono),a(5),o(l.tipoPermisionario),a(),p("ngForOf",l.datos))},dependencies:[j,L,N,V,k,F],encapsulation:2})};export{O as PermisosDetailComponent};
