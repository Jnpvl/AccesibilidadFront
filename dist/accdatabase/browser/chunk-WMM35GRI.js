import{a as m}from"./chunk-RV4HWPOC.js";import{O as d,T as p,c as s}from"./chunk-DBOOX4Q2.js";var b=class l{constructor(r){this.apiclientService=r}getPermisos(r,e,i,n,a){return s(this,null,function*(){let o=localStorage.getItem("token"),c=new URLSearchParams({page:r.toString(),pageSize:e.toString()});i&&c.append("search",i),n&&c.append("fechaInicio",n),a&&c.append("fechaTermino",a);let t={headers:{Authorization:`Bearer ${o}`}};return this.apiclientService.get(`/permisos?${c.toString()}`,t)})}getPermisionario(r){return s(this,null,function*(){let i={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};return this.apiclientService.get(`permisos/permisionario?permisionarioId=${r}`,i)})}downloadReports(r){return s(this,null,function*(){try{let e=localStorage.getItem("token"),i=e?{Authorization:`Bearer ${e}`}:{},n=yield this.apiclientService.get("permisos/reports",{params:{permisionarioId:r},responseType:"blob",headers:i}),a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download="reporte_permisos.pdf",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(e){console.error("Error al descargar el reporte:",e)}})}downloadExcel(r){return s(this,null,function*(){try{let e=localStorage.getItem("token"),i=e?{Authorization:`Bearer ${e}`}:{},n=new URLSearchParams;r.columns&&n.append("columns",r.columns),r.filters&&n.append("filters",r.filters);let a=`permisos/excel?${n.toString()}`,o=yield this.apiclientService.get(a,{responseType:"blob",headers:i}),c=window.URL.createObjectURL(o),t=document.createElement("a");t.href=c,t.download="reporte_permisos.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(c)}catch(e){console.error("Error al descargar el excel",e)}})}downloadPermisionarioExcel(r){return s(this,null,function*(){try{let e=localStorage.getItem("token"),i=e?{Authorization:`Bearer ${e}`}:{},n={PermisionarioId:r.toString()},a=JSON.stringify(n),o=yield this.apiclientService.get("permisos/permisionarioExcel",{params:{filters:a},responseType:"blob",headers:i}),c=window.URL.createObjectURL(o),t=document.createElement("a");t.href=c,t.download="reporte_permisosionario.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(c)}catch(e){console.error("Error al descargar el excel",e)}})}downloadIndividualReport(r){return s(this,null,function*(){try{let e=localStorage.getItem("token"),i=e?{Authorization:`Bearer ${e}`}:{},n=yield this.apiclientService.get("permisos/report",{params:{permisoId:r},responseType:"blob",headers:i}),a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download="reporte_permisos.pdf",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(e){console.error("Error al descargar el reporte:",e)}})}static \u0275fac=function(e){return new(e||l)(p(m))};static \u0275prov=d({token:l,factory:l.\u0275fac,providedIn:"root"})};export{b as a};
